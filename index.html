<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Casa Linda Imobiliário, Lda</title>
  <style>
    body{margin:0;font-family:Segoe UI,Arial,sans-serif;background:#fff;color:#333}
    header{background:#fff;border-bottom:1px solid #eee;position:sticky;top:0;z-index:999}
    .nav{max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#111}
    .brand img{height:80px;border-radius:10px}
    .brand-text{font-weight:700;font-size:18px}
    nav a{text-decoration:none;color:#333;margin-left:16px;padding:8px;border-radius:6px}
    nav a:hover{background:#f7f7f7}
    .btn{background:#1a1a1a;color:#fff;border:none;border-radius:8px;padding:10px 16px;cursor:pointer;text-decoration:none}
    .btn.gold{background:#b9975b;color:#111}
    main{max-width:1100px;margin:0 auto;padding:24px 16px}
    .hero{background:#fafafa;border:1px solid #eee;border-radius:16px;padding:28px}
    .hero h1{margin:0;font-size:28px}
    .hero p{color:#777;margin:0 0 8px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:20px}
    .card{border:1px solid #eee;border-radius:14px;background:#fff;display:flex;flex-direction:column}
    .card-media{height:160px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;border-bottom:1px solid #eee}
    .mdf-panel{width:80%;height:70%;border-radius:12px;background:#fff;border:2px solid #e6e6e6}
    .card-body{padding:14px}
    .card h3{margin:0 0 6px}
    .card p{margin:0 0 10px;color:#777}
    .price{font-weight:600;color:#111;margin-bottom:10px}
    footer{margin-top:40px;border-top:1px solid #eee;background:#fafafa}
    footer .wrap{max-width:1100px;margin:0 auto;padding:16px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;color:#555}
    footer small{color:#777}
    .footer-action a{display:inline-flex;align-items:center;gap:8px;background:#25D366;color:#fff;padding:10px 14px;border-radius:8px;text-decoration:none;font-weight:600}
    .footer-action a:hover{filter:brightness(1.05)}
    .footer-action svg{width:18px;height:18px}
    .drawer{position:fixed;right:0;top:0;height:100%;width:360px;max-width:90vw;background:#fff;border-left:1px solid #eee;
      box-shadow:-8px 0 24px #00000020;transition:transform .28s ease;z-index:1200;display:flex;flex-direction:column}
    .drawer-header{padding:12px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}
    .drawer-body{flex:1;overflow-y:auto;padding:12px}
    .drawer-footer{border-top:1px solid #eee;padding:12px}
    .drawer-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #f0f0f0}
    .drawer-item-title{font-weight:600}
    .drawer-item-meta{font-size:13px;color:#777}
    @media(min-width:901px){
      .drawer{transform:translateX(100%);}
      .drawer.open{transform:translateX(0);}
    }
    @media(max-width:900px){
      .drawer{transform:translateX(100%);}
      .drawer.open{transform:translateX(0);}
    }
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:80px;background:#111;color:#fff;padding:10px 14px;border-radius:8px;z-index:2000}
    /* Overlay para mobile */
    .drawer-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
      z-index: 1100;
      display: none;
    }
    .drawer-overlay.active { display: block; }

    /* Ajustes mobile header e botão WhatsApp */
    @media(max-width:600px){
      .nav{flex-direction:column;align-items:flex-start;padding:8px 12px}
      .brand{flex-direction:column;align-items:flex-start;gap:6px}
      .brand img{height:60px}
      .brand-text{font-size:16px}
      nav{display:flex;flex-direction:column;width:100%;margin-top:8px}
      nav a, nav .btn{margin:4px 0;width:100%;text-align:center}
      .footer-action a{padding:8px 10px;font-size:14px}
      .footer-action svg{width:14px;height:14px}
    }
  </style>
</head>
<body>
<header>
  <div class="nav">
    <a class="brand" href="index.html">
      <img src="imagens/logo.jpg" alt="Casa Linda Logo" />
      <div class="brand-text">Casa Linda Imobiliário, Lda</div>
    </a>
    <nav>
      <a href="index.html">Início</a>
      <a href="#" id="open-cart">Carrinho</a>
      <a href="pagamento-seguro.html">Pagamento seguro</a>
      <a href="https://wa.me/244932935960" target="_blank" class="btn gold">Conversar no WhatsApp</a>
    </nav>
  </div>
</header>

<main>
  <section class="hero">
    <h1>Design que acolhe. Elegância que permanece.</h1>
    <p>Escolha os móveis planejados com assinatura de designer e finalize sua compra com confiança.</p>
  </section>

  <section class="grid">
  <article class="card">
    <div class="card-media">
      <img src="imagens/Painel-MDF-Branco-sala.jpg" alt="Painel MDF Branco — Sala" style="max-width:100%;max-height:100%;border-radius:12px">
    </div>
    <div class="card-body">
      <h3>Painel MDF Branco — Sala</h3>
      <p>Acabamento premium, linhas contemporâneas, instalação sob medida.</p>
      <div class="price">120,000 AOA</div>
      <button class="btn" data-add data-id="p1" data-name="Painel MDF Branco — Sala" data-variant="1,80m x 1,20m" data-price="120000">Adicionar ao carrinho</button>
    </div>
  </article>

  <article class="card">
    <div class="card-media">
      <img src="imagens/Aparador-MDF-Branco-Classe-Fina.jpg" alt="Aparador MDF Branco — Classe Fina" style="max-width:100%;max-height:100%;border-radius:12px">
    </div>
    <div class="card-body">
      <h3>Aparador MDF Branco — Classe Fina</h3>
      <p>Design minimalista com ferragens discretas e alto padrão.</p>
      <div class="price">95,000 AOA</div>
      <button class="btn" data-add data-id="p2" data-name="Aparador MDF Branco — Classe Fina" data-variant="1,40m x 0,45m" data-price="95000">Adicionar ao carrinho</button>
    </div>
  </article>

  <article class="card">
    <div class="card-media">
      <img src="imagens/Armario-Planejado-MDF-Branco.jpg" alt="Armário Planejado MDF Branco" style="max-width:100%;max-height:100%;border-radius:12px">
    </div>
    <div class="card-body">
      <h3>Armário Planejado MDF Branco</h3>
      <p>Modular, sob medida, com otimização de espaço e acabamento limpo.</p>
      <div class="price">180,000 AOA</div>
      <button class="btn" data-add data-id="p3" data-name="Armário Planejado MDF Branco" data-variant="2,00m x 0,60m" data-price="180000">Adicionar ao carrinho</button>
    </div>
  </article>
</section>
</main>

<!-- Overlay -->
<div id="drawer-overlay" class="drawer-overlay"></div>

<!-- Carrinho lateral -->
<aside id="drawer" class="drawer">
  <div class="drawer-header">
    <h2>Carrinho</h2>
    <button class="btn ghost" id="close-cart">Fechar</button>
  </div>
  <div class="drawer-body" id="drawer-body">
    <div class="empty" id="cart-empty">O carrinho está vazio. Adicione produtos na página inicial.</div>
  </div>
  <div class="drawer-footer">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
      <strong>Total:</strong>
      <strong id="cart-total">0 AOA</strong>
    </div>
    <a class="btn gold" href="carrinho.html" id="finalizar-btn" style="display:none;width:100%;text-align:center">
      Finalizar compra
    </a>
  </div>
</aside>

<footer>
  <div class="wrap">
    <div>
      <strong>Casa Linda Imobiliário, Lda</strong><br>
      <small>Localização: Camama 1</small>
    </div>
    <div class="footer-action">
      <a href="https://wa.me/244932935960" target="_blank">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M20.52 3.48A11.92 11.92 0 0 0 12.01 0C5.38 0 .01 5.37.01 12c0 2.11.55 4.17 1.59 6L0 24l6.12-1.6a11.98 11.98 0 0 0 17.91-10.4c0-3.19-1.24-6.19-3.51-8.52zm-8.51 19.2a9.73 9.73 0 0 1-5.25-1.53l-.38-.23-3.64.95.97-3.55-.25-.37A9.8 9.8 0 1 1 21.82 12a9.8 9.8 0 0 1-9.81 9.68zm5.34-6.97c-.3-.15-1.75-.86-2.02-.95-.27-.1-.47-.15-.66.15-.19.29-.76.95-.93 1.14-.17.19-.34.22-.64.07-.3-.15-1.27-.47-2.42-1.5-.89-.79-1.5-1.77-1.67-2.07-.17-.29-.02-.45.13-.6"/>
        </svg>
        Conversar no WhatsApp
      </a>
    </div>
  </div>
</footer>

<script>
  const CART_KEY = "casaLindaCart";

  function getCart(){ 
    try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; } 
    catch { return []; } 
  }
  function saveCart(cart){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
  function formatCurrency(v){ return new Intl.NumberFormat('pt-AO',{style:'currency',currency:'AOA'}).format(v); }
  function toast(msg){
    const t = document.createElement('div');
    t.className = 'toast'; 
    t.textContent = msg;
    document.body.appendChild(t);
    setTimeout(()=>t.remove(),2000);
  }

  function renderCart(){
    const cart = getCart();
    const body = document.getElementById("drawer-body");
    body.querySelectorAll('.drawer-item').forEach(n => n.remove());
    let total = 0;
    if(cart.length === 0){
      document.getElementById("cart-empty").style.display = 'block';
      document.getElementById("cart-total").textContent = "0 AOA";
      document.getElementById("finalizar-btn").style.display = "none";
    } else {
      document.getElementById("cart-empty").style.display = 'none';
      cart.forEach(i=>{
        total += i.price * i.qty;
        const row = document.createElement("div");
        row.className = "drawer-item";
        row.innerHTML = `
          <div>
            <div class="drawer-item-title">${i.name}</div>
            <div class="drawer-item-meta">${i.variant || '—'} • ${formatCurrency(i.price)}</div>
          </div>
          <div style="display:flex;align-items:center;gap:6px">
            <button class="btn gold" onclick="addMore('${i.id}')">+</button>
            <span><strong>x${i.qty}</strong></span>
            <button class="btn ghost" onclick="removeOne('${i.id}')">-</button>
            <button class="btn ghost" onclick="removeItem('${i.id}')">Remover</button>
          </div>
        `;
        body.appendChild(row);
      });
      document.getElementById("cart-total").textContent = formatCurrency(total);
      document.getElementById("finalizar-btn").style.display = "inline-block";
    }
  }

  function addToCart(item){
    const cart = getCart();
    const idx = cart.findIndex(i => i.id === item.id);
    if(idx>=0){ cart[idx].qty += 1; } else { cart.push({...item, qty:1}); }
    saveCart(cart);
    renderCart();
    toast("Item adicionado ao carrinho.");
    openDrawer(); // abre sempre após inserir o primeiro item
  }

  function removeItem(id){
    const cart = getCart().filter(i => i.id !== id);
    saveCart(cart);
    renderCart();
    toast("Item removido.");
  }

  function addMore(id){
    const cart = getCart();
    const idx = cart.findIndex(i => i.id === id);
    if(idx>=0){ cart[idx].qty += 1; }
    saveCart(cart);
    renderCart();
    toast("Quantidade aumentada.");
  }

  function removeOne(id){
    const cart = getCart();
    const idx = cart.findIndex(i => i.id === id);
    if(idx>=0){ 
      if(cart[idx].qty > 1){ cart[idx].qty -= 1; } else { cart.splice(idx,1); }
    }
    saveCart(cart);
    renderCart();
    toast("Quantidade reduzida.");
  }

  function openDrawer(){
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawer-overlay');
    if(drawer) drawer.classList.add('open');
    if(overlay) overlay.classList.add('active');
  }
  function closeDrawer(){
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawer-overlay');
    if(drawer) drawer.classList.remove('open');
    if(overlay) overlay.classList.remove('active');
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    document.querySelectorAll('[data-add]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const item = {
          id: btn.getAttribute('data-id'),
          name: btn.getAttribute('data-name'),
          variant: btn.getAttribute('data-variant'),
          price: parseFloat(btn.getAttribute('data-price'))
        };
        addToCart(item);
      });
    });

    const openBtn = document.getElementById('open-cart');
    const closeBtn = document.getElementById('close-cart');
    const overlay = document.getElementById('drawer-overlay');

    if(openBtn){
      openBtn.addEventListener('click', (e)=>{
        e.preventDefault();
        const cart = getCart();
        if(cart.length > 0){ openDrawer(); }
        else { toast("Adicione um produto antes de abrir o carrinho."); }
      });
    }
    if(closeBtn) closeBtn.addEventListener('click', closeDrawer);
    if(overlay) overlay.addEventListener('click', closeDrawer);

    renderCart();
  });
</script>
</body>
</html>
